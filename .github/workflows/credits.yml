# å°†ç¤¾åŒºæˆå‘˜åˆ—è¡¨æ’å…¥åˆ° ./README.md æ–‡ä»¶ä¸­
name: ğŸ’“ æ’å…¥è´¡çŒ®è€…å’ŒèµåŠ©è€…åˆ—è¡¨

# å·¥ä½œæµè§¦å‘æ¡ä»¶
on:
  # æ‰‹åŠ¨è§¦å‘ï¼šå…è®¸åœ¨ GitHub Actions ç•Œé¢æ‰‹åŠ¨è¿è¡Œæ­¤å·¥ä½œæµ
  workflow_dispatch:
  # å®šæ—¶è§¦å‘ï¼šä½¿ç”¨ cron è¡¨è¾¾å¼è®¾ç½®å®šæ—¶ä»»åŠ¡
  schedule:
    # æ¯å‘¨æ—¥å‡Œæ™¨ 01:45 æ‰§è¡Œ
    - cron: '45 1 * * 0'

# ä»»åŠ¡ï¼ˆJobsï¼‰å®šä¹‰
jobs:
  # ä»»åŠ¡ #1 - è·å–èµåŠ©è€…åˆ—è¡¨å¹¶å°†è¡¨æ ¼æ’å…¥åˆ° README æ–‡ä»¶ä¸­
  insert-sponsors:
    # è¿è¡Œç¯å¢ƒï¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu
    runs-on: ubuntu-latest
    # ä»»åŠ¡åç§°
    name: æ’å…¥èµåŠ©è€…åˆ—è¡¨ ğŸ’“
    # æ­¥éª¤ï¼ˆStepsï¼‰å®šä¹‰
    steps:
      # æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç ä»“åº“
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      # æ­¥éª¤ 2ï¼šä½¿ç”¨èµåŠ©è€…åˆ—è¡¨æ›´æ–° README æ–‡ä»¶
      - name: ä½¿ç”¨èµåŠ©è€…åˆ—è¡¨æ›´æ–° README æ–‡ä»¶
        uses: JamesIves/github-sponsors-readme-action@v1
        with:
          # ä½¿ç”¨ BOT_TOKEN æˆ– GITHUB_TOKEN è¿›è¡Œè®¤è¯
          token: ${{ secrets.BOT_TOKEN || secrets.GITHUB_TOKEN }}
          # è¦æ›´æ–°çš„æ–‡ä»¶è·¯å¾„
          file: .github/README.md

  # ä»»åŠ¡ #2 - è·å–è´¡çŒ®è€…åˆ—è¡¨å¹¶å°†è¡¨æ ¼æ’å…¥åˆ° README æ–‡ä»¶ä¸­
  insert-contributors:
    # è¿è¡Œç¯å¢ƒï¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu
    runs-on: ubuntu-latest
    # ä»»åŠ¡åç§°
    name: æ’å…¥è´¡çŒ®è€…åˆ—è¡¨ ğŸ’“
    # æ­¥éª¤ï¼ˆStepsï¼‰å®šä¹‰
    steps:
      # æ­¥éª¤ 1ï¼šä½¿ç”¨è´¡çŒ®è€…åˆ—è¡¨æ›´æ–° README æ–‡ä»¶
      - name: ä½¿ç”¨è´¡çŒ®è€…åˆ—è¡¨æ›´æ–° README æ–‡ä»¶
        uses: akhilmhdh/contributors-readme-action@v2.3.10
        env:
          # ä½¿ç”¨ BOT_TOKEN æˆ– GITHUB_TOKEN è¿›è¡Œè®¤è¯
          GITHUB_TOKEN: ${{ secrets.BOT_TOKEN || secrets.GITHUB_TOKEN }}
        with:
          # è´¡çŒ®è€…å¤´åƒå¤§å°ï¼ˆåƒç´ ï¼‰
          image_size: 80
          # README æ–‡ä»¶è·¯å¾„
          readme_path: .github/README.md
          # æ¯è¡Œæ˜¾ç¤ºçš„åˆ—æ•°ï¼ˆè´¡çŒ®è€…æ•°é‡ï¼‰
          columns_per_row: 6
          # æäº¤æ¶ˆæ¯
          commit_message: 'docs: æ›´æ–°è´¡çŒ®è€…åˆ—è¡¨'
          # æäº¤è€…ç”¨æˆ·å
          committer_username: liss-bot
          # æäº¤è€…é‚®ç®±
          committer_email: liss-bot@d0h.co

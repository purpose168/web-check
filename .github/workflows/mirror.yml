# å°†ä»“åº“å†…å®¹æ¨é€åˆ° Codeberg é•œåƒä»“åº“
name: ğŸª é•œåƒåˆ° Codeberg

# å·¥ä½œæµè§¦å‘æ¡ä»¶
on:
  # æ‰‹åŠ¨è§¦å‘ï¼šå…è®¸åœ¨ GitHub Actions ç•Œé¢æ‰‹åŠ¨è¿è¡Œæ­¤å·¥ä½œæµ
  workflow_dispatch:
  # å®šæ—¶è§¦å‘ï¼šä½¿ç”¨ cron è¡¨è¾¾å¼è®¾ç½®å®šæ—¶ä»»åŠ¡
  schedule:
    # æ¯å‘¨æ—¥å‡Œæ™¨ 00:30 æ‰§è¡Œ
    - cron: '30 0 * * 0'

# ä»»åŠ¡ï¼ˆJobsï¼‰å®šä¹‰
jobs:
  # ä»»åŠ¡ï¼šé•œåƒåˆ° Codeberg
  codeberg:
    # è¿è¡Œç¯å¢ƒï¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu
    runs-on: ubuntu-latest
    # æ­¥éª¤ï¼ˆStepsï¼‰å®šä¹‰
    steps:
      # æ­¥éª¤ 1ï¼šæ£€å‡ºä»£ç ä»“åº“
      - uses: actions/checkout@v4
        with:
          # è·å–å®Œæ•´çš„ Git å†å²ï¼ˆfetch-depth: 0 è¡¨ç¤ºä¸é™åˆ¶æ·±åº¦ï¼‰
          { fetch-depth: 0 }
      # æ­¥éª¤ 2ï¼šä½¿ç”¨é•œåƒæ“ä½œå°†ä»£ç æ¨é€åˆ° Codeberg
      - uses: pixta-dev/repository-mirroring-action@v1
        with:
          # ç›®æ ‡ä»“åº“ URLï¼šCodeberg ä»“åº“çš„ SSH åœ°å€
          target_repo_url: git@codeberg.org:alicia/web-check.git
          # SSH ç§é’¥ï¼šç”¨äºè®¤è¯ Codeberg ä»“åº“çš„ SSH å¯†é’¥
          ssh_private_key: ${{ secrets.CODEBERG_SSH }}
